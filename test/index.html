<html>
  <head>
  </head>
  <body>
    <div id="ba">
    </div>
    <script src="//code.jquery.com/jquery-1.10.1.min.js">
    </script>
    <script>
      if (window.DeviceOrientationEvent) {
        window.addEventListener("deviceorientation", handleOrientation, false);
      }

      function handleOrientation(event){
        var canHandleOrientation = event; // will be either null or with event data
        window.removeEventListener("deviceorientation", handleOrientation, false);
        init(canHandleOrientation);
      }
      function changeImage(evt) {
        if(evt.gamma < -15) {
          $(".ba-title").html("After");
          $(".ba-img").attr("src", "after.jpg");
        }
        if(evt.gamma > 15) {
          $(".ba-title").html("Before");
          $(".ba-img").attr("src", "before.jpg");
        }
      }
      function init(canHandleOrientation) {
      if (canHandleOrientation.gamma == null) {
        $("#ba").html($('<div style="float:left"><h1>Before</h1><img src="before.jpg" /></div><div style="float:left"><h1>After</h1><img src="after.jpg" /></div>'));
      } else {
        $("#ba").html($('<div><h1 class="ba-title">Before</h1><img class="ba-img" src="before.jpg" /></div>'));
        window.addEventListener("deviceorientation", changeImage);

      }
      }
    </script>
  </body>
</html>
